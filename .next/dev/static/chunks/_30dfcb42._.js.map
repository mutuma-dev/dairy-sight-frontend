{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Desktop/dairy-sight-frontend/components/sidebar.tsx"],"sourcesContent":["/**\r\n * Sidebar Navigation Component\r\n * ----------------------------\r\n * Displays the main navigation menu with vendor info\r\n * Fetches vendor details from the backend\r\n * Vendor info refreshes automatically when sidebar is opened\r\n * Handles page navigation and mobile menu toggle\r\n * Fully responsive with collapsible mobile sidebar\r\n */\r\n\r\n\"use client\"\r\n\r\nimport { useState, useEffect } from \"react\"\r\nimport type { Vendor } from \"@/lib/types\"\r\nimport { BarChart3, Zap, Lock, LayoutDashboard, Menu, DollarSign, Wallet, RefreshCw } from \"lucide-react\"\r\n\r\n// Backend URL (replace with env variable later)\r\nconst BACKEND_URL = \"https://40ed9b23-ce6c-4865-9ea7-673fc391e9ac-00-1earrmirya0dv.picard.replit.dev\"\r\n\r\ninterface SidebarProps {\r\n  currentPage: string\r\n  onPageChange: (page: string) => void\r\n  isOpen: boolean\r\n  onToggle: () => void\r\n  vendorUpdatedTrigger?: number // increments when vendor details edited in Account component\r\n}\r\n\r\nexport default function Sidebar({ currentPage, onPageChange, isOpen, onToggle, vendorUpdatedTrigger }: SidebarProps) {\r\n  // Local vendor state\r\n  const [vendor, setVendor] = useState<Vendor | null>(null)\r\n  const [loadingVendor, setLoadingVendor] = useState(true)\r\n  const [vendorError, setVendorError] = useState(\"\")\r\n\r\n  /**\r\n   * Fetch vendor details from backend\r\n   */\r\n  const fetchVendor = async () => {\r\n    setLoadingVendor(true)\r\n    setVendorError(\"\")\r\n    try {\r\n      const res = await fetch(`${BACKEND_URL}/api/vendor`)\r\n      if (!res.ok) throw new Error(\"Failed to fetch vendor details\")\r\n      const data: Vendor = await res.json()\r\n      setVendor(data)\r\n    } catch (err: any) {\r\n      setVendorError(err.message || \"Unknown error fetching vendor\")\r\n    } finally {\r\n      setLoadingVendor(false)\r\n    }\r\n  }\r\n\r\n  // Initial fetch on mount\r\n  useEffect(() => {\r\n    fetchVendor()\r\n  }, [])\r\n\r\n  // Re-fetch vendor when Account component triggers update\r\n  useEffect(() => {\r\n    if (vendorUpdatedTrigger !== undefined) {\r\n      fetchVendor()\r\n    }\r\n  }, [vendorUpdatedTrigger])\r\n\r\n  // Re-fetch vendor anytime sidebar is opened\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      fetchVendor()\r\n    }\r\n  }, [isOpen])\r\n\r\n  // Navigation menu items\r\n  const menuItems = [\r\n    { id: \"dashboard\", label: \"Dashboard\", icon: LayoutDashboard },\r\n    { id: \"atm-devices\", label: \"ATM Devices\", icon: Zap },\r\n    { id: \"tamper-detection\", label: \"Tamper Detection\", icon: Lock },\r\n    { id: \"sales-analytics\", label: \"Sales Analytics\", icon: BarChart3 },\r\n    { id: \"price\", label: \"Price\", icon: DollarSign },\r\n    { id: \"account\", label: \"Account\", icon: Wallet },\r\n  ]\r\n\r\n  return (\r\n    <>\r\n      {/* Mobile toggle button */}\r\n      <button\r\n        onClick={onToggle}\r\n        className=\"fixed lg:hidden top-4 left-4 z-50 p-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 shadow-lg\"\r\n        aria-label=\"Toggle menu\"\r\n      >\r\n        <Menu size={24} strokeWidth={1.5} />\r\n      </button>\r\n\r\n      {/* Mobile backdrop overlay */}\r\n      {isOpen && (\r\n        <div\r\n          className=\"fixed inset-0 bg-black/30 backdrop-blur-sm z-30 lg:hidden\"\r\n          onClick={onToggle}\r\n          aria-hidden=\"true\"\r\n        />\r\n      )}\r\n\r\n      {/* Sidebar */}\r\n      <aside\r\n        className={`fixed lg:relative w-56 bg-blue-600 text-white flex flex-col transform transition-transform duration-300 ease-in-out z-40 h-screen ${\r\n          isOpen ? \"translate-x-0\" : \"-translate-x-full lg:translate-x-0\"\r\n        }`}\r\n      >\r\n        {/* Header */}\r\n        <div className=\"p-4 lg:p-6 border-b border-blue-500\">\r\n          <h1 className=\"text-lg lg:text-xl font-bold text-white\">Dairy Sight</h1>\r\n\r\n          {/* Vendor details */}\r\n          <div className=\"mt-2 space-y-1 flex items-center justify-between\">\r\n            {loadingVendor ? (\r\n              <span className=\"text-blue-100 text-xs\">Loading vendor...</span>\r\n            ) : vendor ? (\r\n              <div className=\"flex-1 space-y-1\">\r\n                <p className=\"text-blue-100 text-xs\">\r\n                  <span className=\"font-semibold\">Vendor Name:</span> {vendor.name}\r\n                </p>\r\n                <p className=\"text-blue-100 text-xs\">\r\n                  <span className=\"font-semibold\">Vendor ID:</span> {vendor.id}\r\n                </p>\r\n              </div>\r\n            ) : (\r\n              <span className=\"text-red-500 text-xs\">{vendorError || \"Vendor not found\"}</span>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Navigation menu */}\r\n        <nav className=\"flex-1 p-3 lg:p-4 overflow-y-auto\">\r\n          <ul className=\"space-y-1 lg:space-y-2\">\r\n            {menuItems.map((item) => {\r\n              const IconComponent = item.icon\r\n              return (\r\n                <li key={item.id}>\r\n                  <button\r\n                    onClick={() => {\r\n                      onPageChange(item.id)\r\n                      onToggle()\r\n                    }}\r\n                    className={`w-full text-left px-3 lg:px-4 py-2 lg:py-3 rounded-lg font-medium transition-all duration-200 flex items-center gap-2 lg:gap-3 text-sm lg:text-base ${\r\n                      currentPage === item.id ? \"bg-green-500 text-white\" : \"text-blue-100 hover:bg-blue-500\"\r\n                    }`}\r\n                  >\r\n                    <IconComponent size={18} strokeWidth={1.5} />\r\n                    {item.label}\r\n                  </button>\r\n                </li>\r\n              )\r\n            })}\r\n          </ul>\r\n        </nav>\r\n\r\n        {/* Footer */}\r\n        <div className=\"p-3 lg:p-4 border-t border-blue-500\">\r\n          <p className=\"text-xs text-blue-100 truncate\">{vendor?.shopName || \"...\"}</p>\r\n        </div>\r\n      </aside>\r\n    </>\r\n  )\r\n}\r\n\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 309, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Desktop/dairy-sight-frontend/components/cards/stats-card.tsx"],"sourcesContent":["\"use client\"\r\n\r\n/**\r\n * Stats Card Component\r\n * Reusable card for displaying dashboard statistics\r\n * Shows title, value, and change information\r\n * Can be clickable to open modals\r\n * Clean, professional design without icons\r\n */\r\n\r\ninterface StatsCardProps {\r\n  title: string\r\n  value: string\r\n  change: string\r\n  backgroundColor?: string\r\n  onClick?: () => void\r\n  isClickable?: boolean\r\n}\r\n\r\nexport default function StatsCard({\r\n  title,\r\n  value,\r\n  change,\r\n  backgroundColor = \"bg-white\",\r\n  onClick,\r\n  isClickable = false,\r\n}: StatsCardProps) {\r\n  return (\r\n    <div\r\n      onClick={onClick}\r\n      className={`${backgroundColor} rounded-lg shadow-md p-6 ${\r\n        isClickable ? \"cursor-pointer hover:shadow-lg transition-shadow\" : \"\"\r\n      }`}\r\n    >\r\n      <h3 className=\"text-gray-600 font-medium text-sm mb-4\">{title}</h3>\r\n\r\n      <div className=\"space-y-2\">\r\n        <p className=\"text-3xl font-bold text-gray-800\">{value}</p>\r\n        <p className=\"text-blue-600 text-sm font-semibold\">{change}</p>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;;AAmBe,SAAS,UAAU,EAChC,KAAK,EACL,KAAK,EACL,MAAM,EACN,kBAAkB,UAAU,EAC5B,OAAO,EACP,cAAc,KAAK,EACJ;IACf,qBACE,6LAAC;QACC,SAAS;QACT,WAAW,GAAG,gBAAgB,0BAA0B,EACtD,cAAc,qDAAqD,IACnE;;0BAEF,6LAAC;gBAAG,WAAU;0BAA0C;;;;;;0BAExD,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAE,WAAU;kCAAoC;;;;;;kCACjD,6LAAC;wBAAE,WAAU;kCAAuC;;;;;;;;;;;;;;;;;;AAI5D;KAvBwB"}},
    {"offset": {"line": 371, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Desktop/dairy-sight-frontend/components/modals/transactions-list.tsx"],"sourcesContent":["\"use client\"\r\n\r\n/**\r\n * Transactions List Modal Component\r\n * Displays all transactions in a linear, readable card layout\r\n * Shows transaction ID, device, amount, payment type, phone, M-PESA code, and timestamp\r\n * No litres field included\r\n * Fully responsive and visually clean\r\n */\r\n\r\nimport type { Transaction } from \"@/lib/types\"\r\n\r\ninterface TransactionsListProps {\r\n  transactions: Transaction[]\r\n  onClose: () => void\r\n}\r\n\r\nexport default function TransactionsList({ transactions, onClose }: TransactionsListProps) {\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/30 backdrop-blur-sm flex items-center justify-center z-50 p-4\">\r\n      <div className=\"bg-white rounded-xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-hidden flex flex-col\">\r\n        {/* Modal Header */}\r\n        <div className=\"bg-gradient-to-r from-blue-600 to-blue-500 p-4 md:p-6 text-white flex justify-between items-center flex-shrink-0\">\r\n          <div>\r\n            <h2 className=\"text-xl md:text-2xl font-bold\">Transaction History</h2>\r\n            <p className=\"text-blue-100 text-xs md:text-sm mt-1\">{transactions.length} transactions</p>\r\n          </div>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"text-white hover:bg-blue-700 p-2 rounded-lg transition flex-shrink-0 ml-2\"\r\n            aria-label=\"Close modal\"\r\n          >\r\n            ✕\r\n          </button>\r\n        </div>\r\n\r\n        {/* Transactions List */}\r\n        <div className=\"overflow-y-auto flex-1 p-4 md:p-6 space-y-3\">\r\n          {transactions.map((txn) => (\r\n            <div\r\n              key={txn.id}\r\n              className=\"border border-gray-200 rounded-lg p-4 hover:shadow-md transition bg-white\"\r\n            >\r\n              {/* Transaction Info in Linear Layout */}\r\n              <div className=\"space-y-1\">\r\n                <p className=\"text-gray-800 font-semibold\">Transaction ID: <span className=\"font-normal\">{txn.id}</span></p>\r\n                <p className=\"text-gray-800 font-semibold\">Device Name: <span className=\"font-normal\">{txn.deviceName}</span></p>\r\n                <p className=\"text-gray-800 font-semibold\">Device ID: <span className=\"font-normal\">{txn.deviceId}</span></p>\r\n                <p className=\"text-gray-800 font-semibold\">Amount: <span className=\"font-normal text-blue-600\">KES {txn.amount.toLocaleString()}</span></p>\r\n                <p className=\"text-gray-800 font-semibold\">Payment Type: <span className=\"font-normal\">M-PESA</span></p>\r\n                <p className=\"text-gray-800 font-semibold\">Phone: <span className=\"font-normal break-all\">{txn.mpesaNumber}</span></p>\r\n                <p className=\"text-gray-800 font-semibold\">M-PESA Code: <span className=\"font-normal\">{txn.mpesaCode}</span></p>\r\n                <p className=\"text-gray-500 text-xs\">\r\n                  Date:{\" \"}\r\n                  {new Intl.DateTimeFormat(\"en-KE\", {\r\n                    year: \"numeric\",\r\n                    month: \"short\",\r\n                    day: \"numeric\",\r\n                    hour: \"2-digit\",\r\n                    minute: \"2-digit\",\r\n                    second: \"2-digit\",\r\n                    hour12: true,\r\n                    timeZone: \"Africa/Nairobi\",\r\n                  }).format(new Date(txn.timestamp))}\r\n                </p>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n\r\n        {/* Modal Footer */}\r\n        <div className=\"bg-gray-50 px-4 md:px-6 py-3 md:py-4 border-t flex-shrink-0\">\r\n          <button\r\n            onClick={onClose}\r\n            className=\"w-full bg-blue-600 text-white rounded-lg font-medium py-2 hover:bg-blue-700 transition text-sm md:text-base\"\r\n          >\r\n            Close\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;AAAA;;AAiBe,SAAS,iBAAiB,EAAE,YAAY,EAAE,OAAO,EAAyB;IACvF,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;;8BAEb,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;;8CACC,6LAAC;oCAAG,WAAU;8CAAgC;;;;;;8CAC9C,6LAAC;oCAAE,WAAU;;wCAAyC,aAAa,MAAM;wCAAC;;;;;;;;;;;;;sCAE5E,6LAAC;4BACC,SAAS;4BACT,WAAU;4BACV,cAAW;sCACZ;;;;;;;;;;;;8BAMH,6LAAC;oBAAI,WAAU;8BACZ,aAAa,GAAG,CAAC,CAAC,oBACjB,6LAAC;4BAEC,WAAU;sCAGV,cAAA,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAE,WAAU;;4CAA8B;0DAAgB,6LAAC;gDAAK,WAAU;0DAAe,IAAI,EAAE;;;;;;;;;;;;kDAChG,6LAAC;wCAAE,WAAU;;4CAA8B;0DAAa,6LAAC;gDAAK,WAAU;0DAAe,IAAI,UAAU;;;;;;;;;;;;kDACrG,6LAAC;wCAAE,WAAU;;4CAA8B;0DAAW,6LAAC;gDAAK,WAAU;0DAAe,IAAI,QAAQ;;;;;;;;;;;;kDACjG,6LAAC;wCAAE,WAAU;;4CAA8B;0DAAQ,6LAAC;gDAAK,WAAU;;oDAA4B;oDAAK,IAAI,MAAM,CAAC,cAAc;;;;;;;;;;;;;kDAC7H,6LAAC;wCAAE,WAAU;;4CAA8B;0DAAc,6LAAC;gDAAK,WAAU;0DAAc;;;;;;;;;;;;kDACvF,6LAAC;wCAAE,WAAU;;4CAA8B;0DAAO,6LAAC;gDAAK,WAAU;0DAAyB,IAAI,WAAW;;;;;;;;;;;;kDAC1G,6LAAC;wCAAE,WAAU;;4CAA8B;0DAAa,6LAAC;gDAAK,WAAU;0DAAe,IAAI,SAAS;;;;;;;;;;;;kDACpG,6LAAC;wCAAE,WAAU;;4CAAwB;4CAC7B;4CACL,IAAI,KAAK,cAAc,CAAC,SAAS;gDAChC,MAAM;gDACN,OAAO;gDACP,KAAK;gDACL,MAAM;gDACN,QAAQ;gDACR,QAAQ;gDACR,QAAQ;gDACR,UAAU;4CACZ,GAAG,MAAM,CAAC,IAAI,KAAK,IAAI,SAAS;;;;;;;;;;;;;2BAvB/B,IAAI,EAAE;;;;;;;;;;8BA+BjB,6LAAC;oBAAI,WAAU;8BACb,cAAA,6LAAC;wBACC,SAAS;wBACT,WAAU;kCACX;;;;;;;;;;;;;;;;;;;;;;AAOX;KAjEwB"}},
    {"offset": {"line": 641, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Desktop/dairy-sight-frontend/components/modals/alerts-list.tsx"],"sourcesContent":["/**\r\n * Alerts List Modal Component\r\n * Displays all system alerts for offline devices\r\n * Shows device ID, stock, capacity, and status\r\n * Fully responsive for mobile and desktop screens\r\n */\r\n\r\n\"use client\"\r\n\r\nimport type { Alert } from \"@/lib/types\"\r\n\r\ninterface AlertsListProps {\r\n  alerts: Alert[]\r\n  onClose: () => void\r\n}\r\n\r\nexport default function AlertsList({ alerts, onClose }: AlertsListProps) {\r\n  const unresolvedAlerts = alerts.filter((a) => !a.resolved)\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-gradient-to-b from-blue-400/20 via-blue-200/15 to-blue-300/10 backdrop-blur-md flex items-center justify-center z-50 p-4\">\r\n      <div className=\"bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col\">\r\n        {/* Modal Header */}\r\n        <div className=\"bg-gradient-to-r from-red-600 to-red-500 p-4 md:p-6 text-white flex justify-between items-center flex-shrink-0\">\r\n          <div className=\"flex-1\">\r\n            <h2 className=\"text-xl md:text-2xl font-bold\">System Alerts</h2>\r\n            <p className=\"text-red-100 text-xs md:text-sm mt-1\">{unresolvedAlerts.length} unresolved alert(s)</p>\r\n          </div>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"text-white hover:bg-red-700 p-2 rounded-lg transition flex-shrink-0 ml-2\"\r\n            aria-label=\"Close modal\"\r\n          >\r\n            ✕\r\n          </button>\r\n        </div>\r\n\r\n        {/* Alerts List */}\r\n        <div className=\"overflow-y-auto flex-1\">\r\n          {unresolvedAlerts.length > 0 ? (\r\n            <div className=\"space-y-2 md:space-y-3 p-4 md:p-6\">\r\n              {unresolvedAlerts.map((alert) => (\r\n                <div\r\n                  key={alert.id}\r\n                  className=\"border-l-4 border-red-500 bg-red-50 rounded-lg p-3 md:p-4 hover:bg-red-100 transition\"\r\n                >\r\n                  {/* Alert Header */}\r\n                  <div className=\"flex items-start justify-between mb-3 flex-col sm:flex-row gap-2\">\r\n                    <div className=\"flex-1\">\r\n                      <p className=\"font-bold text-sm md:text-base text-gray-800\">{alert.deviceName}</p>\r\n                      <p className=\"text-xs md:text-sm text-gray-600\">Device Offline</p>\r\n                    </div>\r\n                    <span\r\n                      className={`px-2 md:px-3 py-1 rounded-full text-xs font-semibold whitespace-nowrap flex-shrink-0 ${\r\n                        alert.severity === \"critical\" ? \"bg-red-600 text-white\" : \"bg-yellow-600 text-white\"\r\n                      }`}\r\n                    >\r\n                      {alert.severity.toUpperCase()}\r\n                    </span>\r\n                  </div>\r\n\r\n                  {/* Alert Details Grid */}\r\n                  <div className=\"grid grid-cols-2 md:grid-cols-2 gap-2 md:gap-3 text-xs md:text-sm bg-white rounded-lg p-3 mb-3\">\r\n                    {/* Device ID */}\r\n                    <div>\r\n                      <p className=\"text-gray-600 font-medium\">Device ID</p>\r\n                      <p className=\"text-gray-800 font-semibold text-xs md:text-sm\">{alert.deviceId}</p>\r\n                    </div>\r\n\r\n                    {/* Status */}\r\n                    <div>\r\n                      <p className=\"text-gray-600 font-medium\">Status</p>\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <span\r\n                          className={`inline-block w-2 h-2 rounded-full ${\r\n                            alert.status === \"online\" ? \"bg-green-500\" : \"bg-red-500\"\r\n                          }`}\r\n                        ></span>\r\n                        <p className=\"text-gray-800 font-semibold capitalize text-xs md:text-sm\">{alert.status}</p>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Timestamp */}\r\n                  <p className=\"text-xs text-gray-500\">\r\n                    Reported:{\" \"}\r\n                    {new Intl.DateTimeFormat(\"en-KE\", {\r\n                      year: \"numeric\",\r\n                      month: \"short\",\r\n                      day: \"numeric\",\r\n                      hour: \"2-digit\",\r\n                      minute: \"2-digit\",\r\n                      hour12: true,\r\n                      timeZone: \"Africa/Nairobi\",\r\n                    }).format(new Date(alert.timestamp))}\r\n                  </p>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          ) : (\r\n            <div className=\"p-8 md:p-12 text-center\">\r\n              <p className=\"text-gray-500 text-base md:text-lg\">No active alerts</p>\r\n              <p className=\"text-gray-400 mt-2 text-sm md:text-base\">All systems operating normally</p>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Modal Footer */}\r\n        <div className=\"bg-gray-50 px-4 md:px-6 py-3 md:py-4 border-t flex-shrink-0\">\r\n          <button\r\n            onClick={onClose}\r\n            className=\"w-full bg-red-600 text-white rounded-lg font-medium py-2 hover:bg-red-700 transition text-sm md:text-base\"\r\n          >\r\n            Close\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;;;;;CAKC,GAED;;AASe,SAAS,WAAW,EAAE,MAAM,EAAE,OAAO,EAAmB;IACrE,MAAM,mBAAmB,OAAO,MAAM,CAAC,CAAC,IAAM,CAAC,EAAE,QAAQ;IAEzD,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;;8BAEb,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAG,WAAU;8CAAgC;;;;;;8CAC9C,6LAAC;oCAAE,WAAU;;wCAAwC,iBAAiB,MAAM;wCAAC;;;;;;;;;;;;;sCAE/E,6LAAC;4BACC,SAAS;4BACT,WAAU;4BACV,cAAW;sCACZ;;;;;;;;;;;;8BAMH,6LAAC;oBAAI,WAAU;8BACZ,iBAAiB,MAAM,GAAG,kBACzB,6LAAC;wBAAI,WAAU;kCACZ,iBAAiB,GAAG,CAAC,CAAC,sBACrB,6LAAC;gCAEC,WAAU;;kDAGV,6LAAC;wCAAI,WAAU;;0DACb,6LAAC;gDAAI,WAAU;;kEACb,6LAAC;wDAAE,WAAU;kEAAgD,MAAM,UAAU;;;;;;kEAC7E,6LAAC;wDAAE,WAAU;kEAAmC;;;;;;;;;;;;0DAElD,6LAAC;gDACC,WAAW,CAAC,qFAAqF,EAC/F,MAAM,QAAQ,KAAK,aAAa,0BAA0B,4BAC1D;0DAED,MAAM,QAAQ,CAAC,WAAW;;;;;;;;;;;;kDAK/B,6LAAC;wCAAI,WAAU;;0DAEb,6LAAC;;kEACC,6LAAC;wDAAE,WAAU;kEAA4B;;;;;;kEACzC,6LAAC;wDAAE,WAAU;kEAAkD,MAAM,QAAQ;;;;;;;;;;;;0DAI/E,6LAAC;;kEACC,6LAAC;wDAAE,WAAU;kEAA4B;;;;;;kEACzC,6LAAC;wDAAI,WAAU;;0EACb,6LAAC;gEACC,WAAW,CAAC,kCAAkC,EAC5C,MAAM,MAAM,KAAK,WAAW,iBAAiB,cAC7C;;;;;;0EAEJ,6LAAC;gEAAE,WAAU;0EAA6D,MAAM,MAAM;;;;;;;;;;;;;;;;;;;;;;;;kDAM5F,6LAAC;wCAAE,WAAU;;4CAAwB;4CACzB;4CACT,IAAI,KAAK,cAAc,CAAC,SAAS;gDAChC,MAAM;gDACN,OAAO;gDACP,KAAK;gDACL,MAAM;gDACN,QAAQ;gDACR,QAAQ;gDACR,UAAU;4CACZ,GAAG,MAAM,CAAC,IAAI,KAAK,MAAM,SAAS;;;;;;;;+BAnD/B,MAAM,EAAE;;;;;;;;;6CAyDnB,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAE,WAAU;0CAAqC;;;;;;0CAClD,6LAAC;gCAAE,WAAU;0CAA0C;;;;;;;;;;;;;;;;;8BAM7D,6LAAC;oBAAI,WAAU;8BACb,cAAA,6LAAC;wBACC,SAAS;wBACT,WAAU;kCACX;;;;;;;;;;;;;;;;;;;;;;AAOX;KAvGwB"}},
    {"offset": {"line": 927, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Desktop/dairy-sight-frontend/components/modals/device-status-list.tsx"],"sourcesContent":["/**\r\n * Device Status List Modal Component\r\n * Displays all devices with their current status in a detailed view\r\n * Shows device ID, stock, capacity, and online/offline status\r\n * Opened from the dashboard Active Devices card\r\n * Fully responsive for mobile and desktop screens\r\n */\r\n\r\n\"use client\"\r\n\r\nimport type { Device } from \"@/lib/types\"\r\n\r\ninterface DeviceStatusListProps {\r\n  devices: Device[]\r\n  onClose: () => void\r\n}\r\n\r\nexport default function DeviceStatusList({ devices, onClose }: DeviceStatusListProps) {\r\n  const onlineCount = devices.filter((d) => d.status === \"online\").length\r\n  const offlineCount = devices.filter((d) => d.status === \"offline\").length\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-gradient-to-b from-blue-400/20 via-blue-200/15 to-blue-300/10 backdrop-blur-md flex items-center justify-center z-50 p-4\">\r\n      <div className=\"bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col\">\r\n        {/* Modal Header */}\r\n        <div className=\"bg-gradient-to-r from-blue-600 to-blue-500 p-4 md:p-6 text-white flex justify-between items-center flex-shrink-0\">\r\n          <div className=\"flex-1\">\r\n            <h2 className=\"text-xl md:text-2xl font-bold\">All Devices</h2>\r\n            <p className=\"text-blue-100 text-xs md:text-sm mt-1\">\r\n              {onlineCount} online • {offlineCount} offline\r\n            </p>\r\n          </div>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"text-white hover:bg-blue-700 p-2 rounded-lg transition flex-shrink-0 ml-2\"\r\n            aria-label=\"Close modal\"\r\n          >\r\n            ✕\r\n          </button>\r\n        </div>\r\n\r\n        {/* Devices List */}\r\n        <div className=\"overflow-y-auto flex-1\">\r\n          <div className=\"space-y-2 md:space-y-3 p-4 md:p-6\">\r\n            {devices.map((device) => (\r\n              <div\r\n                key={device.id}\r\n                className={`border-l-4 rounded-lg p-3 md:p-4 transition ${\r\n                  device.status === \"online\"\r\n                    ? \"border-l-green-500 bg-green-50 hover:bg-green-100\"\r\n                    : \"border-l-red-500 bg-red-50 hover:bg-red-100\"\r\n                }`}\r\n              >\r\n                {/* Device Header */}\r\n                <div className=\"flex items-start justify-between mb-3 flex-col sm:flex-row gap-2\">\r\n                  <div className=\"flex-1\">\r\n                    <p className=\"font-bold text-sm md:text-base text-gray-800\">{device.id}</p>\r\n                    <p className=\"text-xs md:text-sm text-gray-600\">{device.name}</p>\r\n                  </div>\r\n                  <div className=\"flex items-center gap-2 flex-shrink-0\">\r\n                    <span\r\n                      className={`inline-block w-3 h-3 rounded-full ${\r\n                        device.status === \"online\" ? \"bg-green-500\" : \"bg-red-500\"\r\n                      }`}\r\n                    ></span>\r\n                    <span\r\n                      className={`px-2 md:px-3 py-1 rounded-full text-xs font-semibold whitespace-nowrap ${\r\n                        device.status === \"online\" ? \"bg-green-600 text-white\" : \"bg-red-600 text-white\"\r\n                      }`}\r\n                    >\r\n                      {device.status.toUpperCase()}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Device Details Grid */}\r\n                <div className=\"grid grid-cols-2 md:grid-cols-2 gap-2 md:gap-3 text-xs md:text-sm bg-white rounded-lg p-3\">\r\n                  {/* Device ID */}\r\n                  <div>\r\n                    <p className=\"text-gray-600 font-medium\">Device ID</p>\r\n                    <p className=\"text-gray-800 font-semibold text-xs md:text-sm\">{device.id}</p>\r\n                  </div>\r\n\r\n                  {/* Device Status */}\r\n                  <div>\r\n                    <p className=\"text-gray-600 font-medium\">Current Status</p>\r\n                    <div className=\"flex items-center gap-1\">\r\n                      <span\r\n                        className={`inline-block w-2 h-2 rounded-full ${\r\n                          device.status === \"online\" ? \"bg-green-500\" : \"bg-red-500\"\r\n                        }`}\r\n                      ></span>\r\n                      <p className=\"text-gray-800 font-semibold capitalize\">{device.status}</p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Last Updated */}\r\n                <p className=\"text-xs text-gray-500 mt-3\">\r\n                  Last updated:{\" \"}\r\n                  {new Intl.DateTimeFormat(\"en-KE\", {\r\n                    year: \"numeric\",\r\n                    month: \"short\",\r\n                    day: \"numeric\",\r\n                    hour: \"2-digit\",\r\n                    minute: \"2-digit\",\r\n                    hour12: true,\r\n                    timeZone: \"Africa/Nairobi\",\r\n                  }).format(new Date(device.lastUpdated))}\r\n                </p>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Modal Footer */}\r\n        <div className=\"bg-gray-50 px-4 md:px-6 py-3 md:py-4 border-t flex-shrink-0\">\r\n          <button\r\n            onClick={onClose}\r\n            className=\"w-full bg-blue-600 text-white rounded-lg font-medium py-2 hover:bg-blue-700 transition text-sm md:text-base\"\r\n          >\r\n            Close\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;;;;;;CAMC,GAED;;AASe,SAAS,iBAAiB,EAAE,OAAO,EAAE,OAAO,EAAyB;IAClF,MAAM,cAAc,QAAQ,MAAM,CAAC,CAAC,IAAM,EAAE,MAAM,KAAK,UAAU,MAAM;IACvE,MAAM,eAAe,QAAQ,MAAM,CAAC,CAAC,IAAM,EAAE,MAAM,KAAK,WAAW,MAAM;IAEzE,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;;8BAEb,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAG,WAAU;8CAAgC;;;;;;8CAC9C,6LAAC;oCAAE,WAAU;;wCACV;wCAAY;wCAAW;wCAAa;;;;;;;;;;;;;sCAGzC,6LAAC;4BACC,SAAS;4BACT,WAAU;4BACV,cAAW;sCACZ;;;;;;;;;;;;8BAMH,6LAAC;oBAAI,WAAU;8BACb,cAAA,6LAAC;wBAAI,WAAU;kCACZ,QAAQ,GAAG,CAAC,CAAC,uBACZ,6LAAC;gCAEC,WAAW,CAAC,4CAA4C,EACtD,OAAO,MAAM,KAAK,WACd,sDACA,+CACJ;;kDAGF,6LAAC;wCAAI,WAAU;;0DACb,6LAAC;gDAAI,WAAU;;kEACb,6LAAC;wDAAE,WAAU;kEAAgD,OAAO,EAAE;;;;;;kEACtE,6LAAC;wDAAE,WAAU;kEAAoC,OAAO,IAAI;;;;;;;;;;;;0DAE9D,6LAAC;gDAAI,WAAU;;kEACb,6LAAC;wDACC,WAAW,CAAC,kCAAkC,EAC5C,OAAO,MAAM,KAAK,WAAW,iBAAiB,cAC9C;;;;;;kEAEJ,6LAAC;wDACC,WAAW,CAAC,uEAAuE,EACjF,OAAO,MAAM,KAAK,WAAW,4BAA4B,yBACzD;kEAED,OAAO,MAAM,CAAC,WAAW;;;;;;;;;;;;;;;;;;kDAMhC,6LAAC;wCAAI,WAAU;;0DAEb,6LAAC;;kEACC,6LAAC;wDAAE,WAAU;kEAA4B;;;;;;kEACzC,6LAAC;wDAAE,WAAU;kEAAkD,OAAO,EAAE;;;;;;;;;;;;0DAI1E,6LAAC;;kEACC,6LAAC;wDAAE,WAAU;kEAA4B;;;;;;kEACzC,6LAAC;wDAAI,WAAU;;0EACb,6LAAC;gEACC,WAAW,CAAC,kCAAkC,EAC5C,OAAO,MAAM,KAAK,WAAW,iBAAiB,cAC9C;;;;;;0EAEJ,6LAAC;gEAAE,WAAU;0EAA0C,OAAO,MAAM;;;;;;;;;;;;;;;;;;;;;;;;kDAM1E,6LAAC;wCAAE,WAAU;;4CAA6B;4CAC1B;4CACb,IAAI,KAAK,cAAc,CAAC,SAAS;gDAChC,MAAM;gDACN,OAAO;gDACP,KAAK;gDACL,MAAM;gDACN,QAAQ;gDACR,QAAQ;gDACR,UAAU;4CACZ,GAAG,MAAM,CAAC,IAAI,KAAK,OAAO,WAAW;;;;;;;;+BA9DlC,OAAO,EAAE;;;;;;;;;;;;;;;8BAsEtB,6LAAC;oBAAI,WAAU;8BACb,cAAA,6LAAC;wBACC,SAAS;wBACT,WAAU;kCACX;;;;;;;;;;;;;;;;;;;;;;AAOX;KA9GwB"}},
    {"offset": {"line": 1209, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Desktop/dairy-sight-frontend/components/pages/dashboard.tsx"],"sourcesContent":["/**\r\n * Dashboard Page Component\r\n * ------------------------\r\n * Displays key metrics: Total Sales, Active Devices, Peak Hour, Alerts\r\n * Fetches devices, recent transactions, and vendor details from backend\r\n * Supports manual refresh for devices, transactions, and vendor details\r\n * Vendor details automatically update if edited in Account component\r\n * Fully responsive design for mobile and desktop\r\n */\r\n\r\n\"use client\"\r\n\r\nimport { useState, useEffect } from \"react\"\r\nimport type { AppData, Device, Transaction, Vendor } from \"@/lib/types\"\r\nimport StatsCard from \"@/components/cards/stats-card\"\r\nimport TransactionsList from \"@/components/modals/transactions-list\"\r\nimport AlertsList from \"@/components/modals/alerts-list\"\r\nimport DeviceStatusList from \"@/components/modals/device-status-list\"\r\nimport { RefreshCw } from \"lucide-react\" // subtle refresh icon\r\n\r\n// Backend base URL (replace with env variable later)\r\nconst BACKEND_URL = \"https://40ed9b23-ce6c-4865-9ea7-673fc391e9ac-00-1earrmirya0dv.picard.replit.dev\"\r\n\r\ninterface DashboardProps {\r\n  appData: AppData // static data for analytics, alerts, pricing, etc.\r\n  vendorUpdatedTrigger?: number // incremented whenever vendor is edited\r\n}\r\n\r\nexport default function Dashboard({ appData, vendorUpdatedTrigger }: DashboardProps) {\r\n  // Modal states\r\n  const [showTransactions, setShowTransactions] = useState(false)\r\n  const [showAlerts, setShowAlerts] = useState(false)\r\n  const [showDeviceStatus, setShowDeviceStatus] = useState(false)\r\n\r\n  // Vendor state\r\n  const [vendor, setVendor] = useState<Vendor | null>(null)\r\n  const [loadingVendor, setLoadingVendor] = useState(true)\r\n  const [vendorError, setVendorError] = useState(\"\")\r\n\r\n  // Devices state\r\n  const [devices, setDevices] = useState<Device[]>([])\r\n  const [loadingDevices, setLoadingDevices] = useState(true)\r\n  const [deviceError, setDeviceError] = useState(\"\")\r\n\r\n  // Transactions state\r\n  const [transactions, setTransactions] = useState<Transaction[]>([])\r\n  const [loadingTransactions, setLoadingTransactions] = useState(true)\r\n  const [transactionError, setTransactionError] = useState(\"\")\r\n\r\n  /** Fetch vendor details from backend */\r\n  const fetchVendor = async () => {\r\n    setLoadingVendor(true)\r\n    setVendorError(\"\")\r\n    try {\r\n      const res = await fetch(`${BACKEND_URL}/api/vendor`)\r\n      if (!res.ok) throw new Error(\"Failed to fetch vendor details\")\r\n      const data: Vendor = await res.json()\r\n      setVendor(data)\r\n    } catch (err: any) {\r\n      setVendorError(err.message || \"Unknown error fetching vendor\")\r\n    } finally {\r\n      setLoadingVendor(false)\r\n    }\r\n  }\r\n\r\n  /** Fetch devices from backend */\r\n  const fetchDevices = async () => {\r\n    setLoadingDevices(true)\r\n    setDeviceError(\"\")\r\n    try {\r\n      const res = await fetch(`${BACKEND_URL}/api/devices`)\r\n      if (!res.ok) throw new Error(\"Failed to fetch devices\")\r\n      const data = await res.json()\r\n      setDevices(data)\r\n    } catch (err: any) {\r\n      setDeviceError(err.message || \"Unknown error\")\r\n    } finally {\r\n      setLoadingDevices(false)\r\n    }\r\n  }\r\n\r\n  /** Fetch transactions from backend */\r\n  const fetchTransactions = async () => {\r\n    setLoadingTransactions(true)\r\n    setTransactionError(\"\")\r\n    try {\r\n      const res = await fetch(`${BACKEND_URL}/api/transactions`)\r\n      if (!res.ok) throw new Error(\"Failed to fetch transactions\")\r\n      const data = await res.json()\r\n      setTransactions(data)\r\n    } catch (err: any) {\r\n      setTransactionError(err.message || \"Unknown error\")\r\n    } finally {\r\n      setLoadingTransactions(false)\r\n    }\r\n  }\r\n\r\n  // Initial fetch on mount\r\n  useEffect(() => {\r\n    fetchVendor()\r\n    fetchDevices()\r\n    fetchTransactions()\r\n  }, [])\r\n\r\n  // Re-fetch vendor whenever the Account component edits it\r\n  useEffect(() => {\r\n    if (vendorUpdatedTrigger !== undefined) {\r\n      fetchVendor()\r\n    }\r\n  }, [vendorUpdatedTrigger])\r\n\r\n  // Derived stats\r\n  const onlineDevices = devices.filter((d) => d.status === \"online\").length\r\n  const totalDevices = devices.length\r\n\r\n  return (\r\n    <div className=\"min-h-screen p-3 md:p-6 space-y-4 md:space-y-6 lg:pt-6\">\r\n      {/* Header */}\r\n      <div className=\"flex flex-col sm:flex-row sm:items-center justify-between mt-12 lg:mt-0 gap-2\">\r\n        <h1 className=\"text-xl md:text-2xl lg:text-3xl font-bold text-gray-800\">Dashboard</h1>\r\n        <div className=\"text-sm text-gray-600 bg-white px-3 py-1.5 rounded-lg shadow-sm border border-gray-100 self-start flex items-center gap-2\">\r\n          {loadingVendor ? (\r\n            <span>Loading vendor...</span>\r\n          ) : vendor ? (\r\n            <>\r\n              <span className=\"font-semibold\">Vendor:</span> {vendor.name}\r\n              <span className=\"mx-2 text-gray-300\">|</span>\r\n              <span className=\"font-semibold\">ID:</span> {vendor.id}\r\n            </>\r\n          ) : (\r\n            <span className=\"text-red-500\">{vendorError || \"Vendor not found\"}</span>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Stats Cards */}\r\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-2 md:gap-4\">\r\n        <StatsCard\r\n          title=\"Total Sales (This Week)\"\r\n          value={`KES ${(appData.analytics.totalLitres.last7Days * appData.pricing.pricePerLitre).toLocaleString()}`}\r\n          change=\"+12.5%\"\r\n          backgroundColor=\"bg-white\"\r\n        />\r\n        <StatsCard\r\n          title=\"Active Devices\"\r\n          value={loadingDevices ? \"...\" : `${onlineDevices} / ${totalDevices}`}\r\n          change={loadingDevices ? \"\" : `${Math.round((onlineDevices / totalDevices) * 100)}% uptime`}\r\n          backgroundColor=\"bg-white\"\r\n          onClick={() => setShowDeviceStatus(true)}\r\n          isClickable\r\n        />\r\n        <StatsCard\r\n          title=\"Peak Hour\"\r\n          value={appData.analytics.peakHours.last7Days.hour}\r\n          change={`${appData.analytics.peakHours.last7Days.litres.toLocaleString()} litres sold`}\r\n          backgroundColor=\"bg-white\"\r\n        />\r\n        <StatsCard\r\n          title=\"Alerts\"\r\n          value={appData.alerts.filter((a) => !a.resolved).length.toString()}\r\n          change=\"Requires attention\"\r\n          backgroundColor=\"bg-white\"\r\n          onClick={() => setShowAlerts(true)}\r\n          isClickable\r\n        />\r\n      </div>\r\n\r\n      {/* Welcome Banner */}\r\n      <div className=\"bg-gradient-to-r from-blue-600 to-blue-500 text-white rounded-xl p-6 md:p-8 mt-4 md:mt-6 shadow-lg\">\r\n        <h2 className=\"text-xl md:text-2xl font-bold mb-2\">Welcome to MilkVend Dashboard</h2>\r\n        <p className=\"text-blue-100 text-sm md:text-base\">\r\n          Monitor your milk ATM devices, track sales patterns, and ensure product integrity all in one place. Your vending network is running smoothly.\r\n        </p>\r\n      </div>\r\n\r\n      {/* Recent Transactions */}\r\n      <div className=\"bg-white rounded-xl shadow-md p-4 md:p-6\">\r\n        <div className=\"flex items-center justify-between mb-4\">\r\n          <h3 className=\"text-base md:text-lg font-semibold text-gray-800 flex items-center gap-2\">\r\n            Recent Transactions\r\n            <RefreshCw\r\n              className=\"w-4 h-4 text-gray-500 hover:text-gray-700 cursor-pointer\"\r\n              onClick={fetchTransactions}\r\n              title=\"Refresh transactions\"\r\n            />\r\n          </h3>\r\n          <button\r\n            onClick={() => setShowTransactions(true)}\r\n            className=\"text-blue-600 hover:text-blue-700 text-xs md:text-sm font-medium\"\r\n          >\r\n            View All →\r\n          </button>\r\n        </div>\r\n\r\n        {loadingTransactions ? (\r\n          <p className=\"text-gray-500 text-sm md:text-base\">Loading transactions...</p>\r\n        ) : transactionError ? (\r\n          <p className=\"text-red-500 text-sm md:text-base\">{transactionError}</p>\r\n        ) : transactions.length === 0 ? (\r\n          <p className=\"text-gray-500 text-sm md:text-base\">No transactions found</p>\r\n        ) : (\r\n          <div className=\"space-y-2 md:space-y-3\">\r\n            {transactions.slice(0, 3).map((txn) => (\r\n              <div\r\n                key={txn.id}\r\n                className=\"flex items-center justify-between p-3 md:p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition cursor-pointer flex-col sm:flex-row gap-2 sm:gap-0\"\r\n                onClick={() => setShowTransactions(true)}\r\n              >\r\n                <div className=\"flex-1 min-w-0 w-full sm:w-auto\">\r\n                  <p className=\"font-medium text-sm md:text-base text-gray-800\">{txn.id}</p>\r\n                  <p className=\"text-xs md:text-sm text-gray-500 truncate\">{txn.deviceName}</p>\r\n                  <p className=\"text-xs text-gray-400 mt-1\">\r\n                    {new Intl.DateTimeFormat(\"en-KE\", {\r\n                      year: \"numeric\",\r\n                      month: \"short\",\r\n                      day: \"numeric\",\r\n                      hour: \"2-digit\",\r\n                      minute: \"2-digit\",\r\n                      hour12: true,\r\n                      timeZone: \"Africa/Nairobi\",\r\n                    }).format(new Date(txn.timestamp))}\r\n                  </p>\r\n                </div>\r\n                <p className=\"text-blue-600 font-semibold text-sm md:text-base\">KES {txn.amount.toLocaleString()}</p>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Device Status */}\r\n      <div className=\"bg-white rounded-xl shadow-md p-4 md:p-6\">\r\n        <div className=\"flex items-center justify-between mb-4\">\r\n          <h3 className=\"text-base md:text-lg font-semibold text-gray-800 flex items-center gap-2\">\r\n            Device Status\r\n            <RefreshCw\r\n              className=\"w-4 h-4 text-gray-500 hover:text-gray-700 cursor-pointer\"\r\n              onClick={fetchDevices}\r\n              title=\"Refresh devices\"\r\n            />\r\n          </h3>\r\n          <button\r\n            onClick={() => setShowDeviceStatus(true)}\r\n            className=\"text-blue-600 hover:text-blue-700 text-xs md:text-sm font-medium\"\r\n          >\r\n            View All →\r\n          </button>\r\n        </div>\r\n\r\n        {loadingDevices ? (\r\n          <p className=\"text-gray-500 text-sm md:text-base\">Loading devices...</p>\r\n        ) : deviceError ? (\r\n          <p className=\"text-red-500 text-sm md:text-base\">{deviceError}</p>\r\n        ) : devices.length === 0 ? (\r\n          <p className=\"text-gray-500 text-sm md:text-base\">No devices found</p>\r\n        ) : (\r\n          <div className=\"space-y-2 md:space-y-3\">\r\n            {devices.map((device) => (\r\n              <div\r\n                key={device.id}\r\n                className=\"flex items-center justify-between p-3 md:p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition cursor-pointer flex-col sm:flex-row gap-2 sm:gap-0\"\r\n                onClick={() => setShowDeviceStatus(true)}\r\n              >\r\n                <div className=\"flex-1\">\r\n                  <p className=\"font-medium text-sm md:text-base text-gray-800\">{device.id}</p>\r\n                </div>\r\n                <div className=\"flex items-center gap-2 flex-shrink-0\">\r\n                  <span\r\n                    className={`inline-block w-3 h-3 rounded-full ${\r\n                      device.status === \"online\" ? \"bg-green-500\" : \"bg-red-500\"\r\n                    }`}\r\n                  ></span>\r\n                  <span className=\"text-xs md:text-sm font-medium text-gray-700 capitalize\">{device.status}</span>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Modals */}\r\n      {showTransactions && (\r\n        <TransactionsList transactions={transactions} onClose={() => setShowTransactions(false)} />\r\n      )}\r\n      {showAlerts && <AlertsList alerts={appData.alerts} onClose={() => setShowAlerts(false)} />}\r\n      {showDeviceStatus && <DeviceStatusList devices={devices} onClose={() => setShowDeviceStatus(false)} />}\r\n    </div>\r\n  )\r\n}\r\n\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1771, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Desktop/dairy-sight-frontend/components/modals/device-detail-modal.tsx"],"sourcesContent":["\"use client\"\r\n\r\n/**\r\n * Device Detail Modal Component\r\n * Displays full information about a device when clicked from the device list\r\n * Shows all device properties except available stock and capacity\r\n * Can be used for both ATM Devices and Tamper Detection pages\r\n */\r\n\r\nimport type { Device } from \"@/lib/types\"\r\n\r\ninterface DeviceDetailModalProps {\r\n  device: Device\r\n  onClose: () => void\r\n}\r\n\r\nexport default function DeviceDetailModal({ device, onClose }: DeviceDetailModalProps) {\r\n  return (\r\n    <div className=\"fixed inset-0 bg-gradient-to-b from-blue-400/20 via-blue-200/15 to-blue-300/10 backdrop-blur-md flex items-center justify-center z-50 p-4\">\r\n      <div className=\"bg-white rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto\">\r\n        {/* Modal Header */}\r\n        <div className=\"bg-gradient-to-r from-blue-600 to-blue-500 p-4 md:p-6 text-white flex justify-between items-start sticky top-0\">\r\n          <div className=\"min-w-0\">\r\n            <h2 className=\"text-xl md:text-2xl font-bold\">{device.id}</h2>\r\n            <p className=\"text-blue-100 mt-1 text-xs md:text-sm truncate\">{device.name}</p>\r\n          </div>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"text-white hover:bg-blue-700 p-1 rounded transition flex-shrink-0 ml-2\"\r\n            aria-label=\"Close modal\"\r\n          >\r\n            ✕\r\n          </button>\r\n        </div>\r\n\r\n        {/* Modal Content */}\r\n        <div className=\"p-4 md:p-6 space-y-4 md:space-y-6\">\r\n          {/* Device Status */}\r\n          <div className=\"bg-gray-50 rounded-lg p-3 md:p-4\">\r\n            <p className=\"text-gray-600 text-xs md:text-sm font-medium mb-2\">Device Status</p>\r\n            <div className=\"flex items-center gap-3\">\r\n              <span\r\n                className={`inline-block w-4 h-4 rounded-full ${\r\n                  device.status === \"online\" ? \"bg-green-500\" : \"bg-red-500\"\r\n                }`}\r\n              ></span>\r\n              <span className=\"text-base md:text-lg font-semibold text-gray-800 capitalize\">{device.status}</span>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Last Updated */}\r\n          <div className=\"text-xs md:text-sm text-gray-500 border-t pt-4\">\r\n            <p>\r\n              Last Updated:{\" \"}\r\n              {new Intl.DateTimeFormat(\"en-KE\", {\r\n                year: \"numeric\",\r\n                month: \"short\",\r\n                day: \"numeric\",\r\n                hour: \"2-digit\",\r\n                minute: \"2-digit\",\r\n                hour12: true,\r\n                timeZone: \"Africa/Nairobi\",\r\n              }).format(new Date(device.lastUpdated))}\r\n            </p>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Modal Footer */}\r\n        <div className=\"bg-gray-50 px-4 md:px-6 py-3 md:py-4 border-t flex gap-3 sticky bottom-0\">\r\n          <button\r\n            onClick={onClose}\r\n            className=\"flex-1 bg-blue-600 text-white rounded-lg font-medium py-2 hover:bg-blue-700 transition text-sm md:text-base\"\r\n          >\r\n            Close\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;AAAA;;AAgBe,SAAS,kBAAkB,EAAE,MAAM,EAAE,OAAO,EAA0B;IACnF,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;;8BAEb,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAG,WAAU;8CAAiC,OAAO,EAAE;;;;;;8CACxD,6LAAC;oCAAE,WAAU;8CAAkD,OAAO,IAAI;;;;;;;;;;;;sCAE5E,6LAAC;4BACC,SAAS;4BACT,WAAU;4BACV,cAAW;sCACZ;;;;;;;;;;;;8BAMH,6LAAC;oBAAI,WAAU;;sCAEb,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAE,WAAU;8CAAoD;;;;;;8CACjE,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CACC,WAAW,CAAC,kCAAkC,EAC5C,OAAO,MAAM,KAAK,WAAW,iBAAiB,cAC9C;;;;;;sDAEJ,6LAAC;4CAAK,WAAU;sDAA+D,OAAO,MAAM;;;;;;;;;;;;;;;;;;sCAKhG,6LAAC;4BAAI,WAAU;sCACb,cAAA,6LAAC;;oCAAE;oCACa;oCACb,IAAI,KAAK,cAAc,CAAC,SAAS;wCAChC,MAAM;wCACN,OAAO;wCACP,KAAK;wCACL,MAAM;wCACN,QAAQ;wCACR,QAAQ;wCACR,UAAU;oCACZ,GAAG,MAAM,CAAC,IAAI,KAAK,OAAO,WAAW;;;;;;;;;;;;;;;;;;8BAM3C,6LAAC;oBAAI,WAAU;8BACb,cAAA,6LAAC;wBACC,SAAS;wBACT,WAAU;kCACX;;;;;;;;;;;;;;;;;;;;;;AAOX;KA/DwB"}},
    {"offset": {"line": 1942, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Desktop/dairy-sight-frontend/components/pages/atm-devices.tsx"],"sourcesContent":["/**\r\n * ATM Devices Page Component\r\n * -------------------------\r\n * - Fetches devices from backend API\r\n * - Adds new devices via POST request\r\n * - Shows modern inline notifications\r\n * - Automatically refreshes device list after adding\r\n * - Shows loading spinner while fetching devices\r\n * - Backend URL is centralized for easy move to env file\r\n */\r\n\r\n\"use client\"\r\n\r\nimport { useState, useEffect } from \"react\"\r\nimport type { Device } from \"@/lib/types\"\r\nimport DeviceDetailModal from \"@/components/modals/device-detail-modal\"\r\n\r\n// Backend base URL (replace with env variable later)\r\nconst BACKEND_URL =\r\n  \"https://40ed9b23-ce6c-4865-9ea7-673fc391e9ac-00-1earrmirya0dv.picard.replit.dev/api/devices\"\r\n\r\nexport default function AtmDevices() {\r\n  const [deviceList, setDeviceList] = useState<Device[]>([])\r\n  const [selectedDevice, setSelectedDevice] = useState<Device | null>(null)\r\n  const [showAddModal, setShowAddModal] = useState(false)\r\n  const [newDevice, setNewDevice] = useState({ id: \"\", name: \"\", status: \"online\" })\r\n  const [notification, setNotification] = useState<{ type: \"success\" | \"error\"; message: string } | null>(null)\r\n  const [loading, setLoading] = useState(false) // Loading state\r\n\r\n  /**\r\n   * Fetch devices from backend\r\n   */\r\n  const fetchDevices = async () => {\r\n    setLoading(true) // Start loading\r\n    try {\r\n      const res = await fetch(BACKEND_URL)\r\n      if (!res.ok) throw new Error(\"Failed to fetch devices\")\r\n      const data: Device[] = await res.json()\r\n      setDeviceList(data)\r\n    } catch (error) {\r\n      console.error(\"Error fetching devices:\", error)\r\n      showNotification(\"error\", \"Failed to load devices from backend.\")\r\n    } finally {\r\n      setLoading(false) // Stop loading\r\n    }\r\n  }\r\n\r\n  // Fetch devices on mount\r\n  useEffect(() => {\r\n    fetchDevices()\r\n  }, [])\r\n\r\n  const handleChange = (field: string, value: string) => {\r\n    setNewDevice({ ...newDevice, [field]: value })\r\n  }\r\n\r\n  const handleStatusToggle = () => {\r\n    setNewDevice({ ...newDevice, status: newDevice.status === \"online\" ? \"offline\" : \"online\" })\r\n  }\r\n\r\n  /**\r\n   * Show notification banner\r\n   */\r\n  const showNotification = (type: \"success\" | \"error\", message: string) => {\r\n    setNotification({ type, message })\r\n    setTimeout(() => setNotification(null), 3000)\r\n  }\r\n\r\n  /**\r\n   * Add a new device via backend POST request\r\n   * After successful add, re-fetch device list from backend\r\n   */\r\n  const handleAddDevice = async () => {\r\n    if (!newDevice.id.trim() || !newDevice.name.trim()) {\r\n      showNotification(\"error\", \"Please fill in all fields.\")\r\n      return\r\n    }\r\n\r\n    try {\r\n      const res = await fetch(BACKEND_URL, {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify(newDevice),\r\n      })\r\n\r\n      const data = await res.json()\r\n\r\n      if (!res.ok) {\r\n        showNotification(\"error\", data.error || \"Failed to add device\")\r\n        return\r\n      }\r\n\r\n      // Success → clear form, close modal, notify user\r\n      setNewDevice({ id: \"\", name: \"\", status: \"online\" })\r\n      setShowAddModal(false)\r\n      showNotification(\"success\", data.message || \"Device added successfully\")\r\n\r\n      // Re-fetch devices from backend to update list\r\n      fetchDevices()\r\n    } catch (error) {\r\n      console.error(\"Error adding device:\", error)\r\n      showNotification(\"error\", \"Failed to add device. Check backend connection.\")\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen p-3 md:p-6 space-y-4 md:space-y-6 lg:pt-6\">\r\n      {/* Notification Banner */}\r\n      {notification && (\r\n        <div\r\n          className={`fixed top-4 left-1/2 transform -translate-x-1/2 px-4 py-2 rounded-md text-white z-50 transition-opacity ${\r\n            notification.type === \"success\" ? \"bg-green-500\" : \"bg-red-500\"\r\n          }`}\r\n        >\r\n          {notification.message}\r\n        </div>\r\n      )}\r\n\r\n      {/* Header */}\r\n      <div className=\"flex justify-between items-start mt-14 lg:mt-0\">\r\n        <div>\r\n          <h1 className=\"text-xl md:text-2xl lg:text-3xl font-bold text-gray-800\">ATM Devices</h1>\r\n          <p className=\"text-gray-600 mt-1 md:mt-2 text-sm md:text-base\">\r\n            Manage and monitor all milk vending ATM devices\r\n          </p>\r\n        </div>\r\n\r\n        <button\r\n          onClick={() => setShowAddModal(true)}\r\n          className=\"bg-blue-600 text-white rounded-lg px-4 py-2 text-sm md:text-base hover:bg-blue-700 transition\"\r\n        >\r\n          + Add Device\r\n        </button>\r\n      </div>\r\n\r\n      {/* Loading Spinner */}\r\n      {loading && (\r\n        <div className=\"flex justify-center items-center py-10\">\r\n          <div className=\"w-10 h-10 border-4 border-blue-600 border-dashed rounded-full animate-spin\"></div>\r\n          <span className=\"ml-2 text-gray-700\">Loading devices...</span>\r\n        </div>\r\n      )}\r\n\r\n      {/* Devices Grid */}\r\n      {!loading && (\r\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 md:gap-6\">\r\n          {deviceList.map((device) => (\r\n            <div\r\n              key={device.id}\r\n              onClick={() => setSelectedDevice(device)}\r\n              className=\"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow cursor-pointer overflow-hidden\"\r\n            >\r\n              <div className=\"bg-gradient-to-r from-blue-600 to-blue-500 p-3 md:p-4 text-white\">\r\n                <h3 className=\"text-base md:text-lg font-bold\">{device.id}</h3>\r\n              </div>\r\n              <div className=\"p-4 md:p-6 space-y-3 md:space-y-4\">\r\n                <div className=\"flex items-center justify-between\">\r\n                  <span className=\"text-gray-600 font-medium text-sm md:text-base\">Device Status</span>\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <span\r\n                      className={`inline-block w-3 h-3 rounded-full ${\r\n                        device.status === \"online\" ? \"bg-green-500\" : \"bg-red-500\"\r\n                      }`}\r\n                    ></span>\r\n                    <span className=\"text-xs md:text-sm font-semibold text-gray-700 capitalize\">{device.status}</span>\r\n                  </div>\r\n                </div>\r\n                <div className=\"pt-3 md:pt-4 text-center\">\r\n                  <p className=\"text-xs md:text-sm text-blue-600 font-medium\">Click to view full details →</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n\r\n      {/* Device Detail Modal */}\r\n      {selectedDevice && <DeviceDetailModal device={selectedDevice} onClose={() => setSelectedDevice(null)} />}\r\n\r\n      {/* Add Device Modal */}\r\n      {showAddModal && (\r\n        <div className=\"fixed inset-0 bg-black/30 backdrop-blur-sm flex items-center justify-center z-50 p-4\">\r\n          <div className=\"bg-white rounded-xl shadow-2xl w-full max-w-md p-6 space-y-4\">\r\n            <h2 className=\"text-lg md:text-xl font-bold text-gray-800\">Add New Device</h2>\r\n            <div className=\"flex flex-col\">\r\n              <label className=\"text-gray-700 text-sm mb-1\">Device ID</label>\r\n              <input\r\n                type=\"text\"\r\n                value={newDevice.id}\r\n                onChange={(e) => handleChange(\"id\", e.target.value)}\r\n                className=\"border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n              />\r\n            </div>\r\n            <div className=\"flex flex-col\">\r\n              <label className=\"text-gray-700 text-sm mb-1\">Device Name</label>\r\n              <input\r\n                type=\"text\"\r\n                value={newDevice.name}\r\n                onChange={(e) => handleChange(\"name\", e.target.value)}\r\n                className=\"border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n              />\r\n            </div>\r\n            <div className=\"flex items-center gap-3\">\r\n              <label className=\"text-gray-700 text-sm\">Status:</label>\r\n              <div className=\"flex items-center gap-2\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  checked={newDevice.status === \"online\"}\r\n                  onChange={handleStatusToggle}\r\n                  className=\"w-4 h-4 accent-blue-600\"\r\n                />\r\n                <span className=\"text-gray-700 text-sm\">Online</span>\r\n              </div>\r\n            </div>\r\n            <div className=\"flex justify-end gap-3 mt-4\">\r\n              <button\r\n                onClick={() => setShowAddModal(false)}\r\n                className=\"bg-gray-200 text-gray-800 px-4 py-2 rounded-md hover:bg-gray-300 transition text-sm\"\r\n              >\r\n                Cancel\r\n              </button>\r\n              <button\r\n                onClick={handleAddDevice}\r\n                className=\"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition text-sm\"\r\n              >\r\n                Save\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2406, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Desktop/dairy-sight-frontend/components/pages/tamper-detection.tsx"],"sourcesContent":["/**\r\n * Tamper Detection Page Component\r\n * -------------------------------\r\n * - Fetches all devices from backend API\r\n * - Filters only tampered devices (isTampered === true)\r\n * - Auto-refreshes every 10 seconds\r\n * - Shows last refreshed timestamp and optional manual refresh button\r\n * - Shows loading spinner while fetching\r\n * - Displays notifications on errors\r\n * - Clicking a card opens full device details modal\r\n */\r\n\r\n\"use client\"\r\n\r\nimport { useState, useEffect } from \"react\"\r\nimport type { Device } from \"@/lib/types\"\r\nimport DeviceDetailModal from \"@/components/modals/device-detail-modal\"\r\nimport { RefreshCw } from \"lucide-react\" // using lucide-react for refresh icon\r\n\r\n// Backend base URL (move to env later)\r\nconst BACKEND_URL =\r\n  \"https://40ed9b23-ce6c-4865-9ea7-673fc391e9ac-00-1earrmirya0dv.picard.replit.dev/api/devices\"\r\n\r\nexport default function TamperDetection() {\r\n  const [deviceList, setDeviceList] = useState<Device[]>([])\r\n  const [selectedDevice, setSelectedDevice] = useState<Device | null>(null)\r\n  const [loading, setLoading] = useState(false)\r\n  const [notification, setNotification] = useState<{ type: \"success\" | \"error\"; message: string } | null>(null)\r\n  const [lastRefreshed, setLastRefreshed] = useState<string | null>(null)\r\n\r\n  // Filter tampered devices\r\n  const tamperedDevices = deviceList.filter((device) => device.isTampered)\r\n\r\n  /**\r\n   * Show notification banner\r\n   */\r\n  const showNotification = (type: \"success\" | \"error\", message: string) => {\r\n    setNotification({ type, message })\r\n    setTimeout(() => setNotification(null), 3000)\r\n  }\r\n\r\n  /**\r\n   * Fetch all devices from backend\r\n   */\r\n  const fetchDevices = async () => {\r\n    setLoading(true)\r\n    try {\r\n      const res = await fetch(BACKEND_URL)\r\n      if (!res.ok) throw new Error(\"Failed to fetch devices\")\r\n      const data: Device[] = await res.json()\r\n      setDeviceList(data)\r\n      setLastRefreshed(new Date().toLocaleTimeString()) // update timestamp\r\n    } catch (error) {\r\n      console.error(\"Error fetching devices:\", error)\r\n      showNotification(\"error\", \"Failed to load devices from backend.\")\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  // Fetch devices on mount and set auto-refresh\r\n  useEffect(() => {\r\n    fetchDevices()\r\n\r\n    const interval = setInterval(() => {\r\n      fetchDevices()\r\n    }, 10000) // auto-refresh every 10 seconds\r\n\r\n    return () => clearInterval(interval)\r\n  }, [])\r\n\r\n  return (\r\n    <div className=\"min-h-screen p-3 md:p-6 space-y-4 md:space-y-6 lg:pt-6\">\r\n      {/* Notification Banner */}\r\n      {notification && (\r\n        <div\r\n          className={`fixed top-4 left-1/2 transform -translate-x-1/2 px-4 py-2 rounded-md text-white z-50 transition-opacity ${\r\n            notification.type === \"success\" ? \"bg-green-500\" : \"bg-red-500\"\r\n          }`}\r\n        >\r\n          {notification.message}\r\n        </div>\r\n      )}\r\n\r\n      {/* Header */}\r\n      <div className=\"flex justify-between items-center mt-14 lg:mt-0\">\r\n        <div>\r\n          <h1 className=\"text-xl md:text-2xl lg:text-3xl font-bold text-gray-800\">Tamper Detection</h1>\r\n          <p className=\"text-gray-600 mt-1 md:mt-2 text-sm md:text-base\">Monitor devices flagged for tampering</p>\r\n        </div>\r\n\r\n        {/* Last Refreshed & Manual Refresh */}\r\n        <div className=\"flex items-center gap-2 text-gray-500 text-sm md:text-base\">\r\n          {lastRefreshed && <span>Last refreshed: {lastRefreshed}</span>}\r\n          <button\r\n            onClick={fetchDevices}\r\n            className=\"p-1 hover:text-gray-800 transition\"\r\n            title=\"Refresh now\"\r\n          >\r\n            <RefreshCw className=\"w-4 h-4 md:w-5 md:h-5\" />\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Tampered Devices Count */}\r\n      {tamperedDevices.length > 0 && (\r\n        <div className=\"bg-red-50 border-l-4 border-red-500 p-3 md:p-4 rounded text-sm md:text-base shadow-sm\">\r\n          <p className=\"text-red-700 font-semibold\">{tamperedDevices.length} device(s) flagged for tampering</p>\r\n        </div>\r\n      )}\r\n\r\n      {/* Loading Spinner */}\r\n      {loading && (\r\n        <div className=\"flex justify-center items-center py-10\">\r\n          <div className=\"w-10 h-10 border-4 border-red-600 border-dashed rounded-full animate-spin\"></div>\r\n          <span className=\"ml-2 text-gray-700\">Loading devices...</span>\r\n        </div>\r\n      )}\r\n\r\n      {/* Devices Grid */}\r\n      {!loading && (tamperedDevices.length > 0 ? (\r\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 md:gap-6\">\r\n          {tamperedDevices.map((device) => (\r\n            <div\r\n              key={device.id}\r\n              onClick={() => setSelectedDevice(device)}\r\n              className=\"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow cursor-pointer overflow-hidden border-2 border-red-200\"\r\n            >\r\n              {/* Card Header */}\r\n              <div className=\"bg-gradient-to-r from-red-600 to-red-500 p-3 md:p-4 text-white\">\r\n                <h3 className=\"text-base md:text-lg font-bold\">{device.id}</h3>\r\n              </div>\r\n\r\n              {/* Card Content */}\r\n              <div className=\"p-4 md:p-6 space-y-3 md:space-y-4\">\r\n                <div className=\"flex items-center justify-between\">\r\n                  <span className=\"text-gray-600 font-medium text-sm md:text-base\">Device Status</span>\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <span\r\n                      className={`inline-block w-3 h-3 rounded-full ${\r\n                        device.status === \"online\" ? \"bg-green-500\" : \"bg-red-500\"\r\n                      }`}\r\n                    ></span>\r\n                    <span className=\"text-xs md:text-sm font-semibold text-gray-700 capitalize\">{device.status}</span>\r\n                  </div>\r\n                </div>\r\n                <div className=\"pt-3 md:pt-4 text-center\">\r\n                  <p className=\"text-xs md:text-sm text-red-600 font-medium\">Click to view full details →</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      ) : (\r\n        <div className=\"text-center py-12\">\r\n          <p className=\"text-gray-500 text-base md:text-lg\">No tampered devices detected</p>\r\n        </div>\r\n      ))}\r\n\r\n      {/* Device Detail Modal */}\r\n      {selectedDevice && <DeviceDetailModal device={selectedDevice} onClose={() => setSelectedDevice(null)} />}\r\n    </div>\r\n  )\r\n}\r\n\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2740, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Desktop/dairy-sight-frontend/components/pages/sales-analytics.tsx"],"sourcesContent":["/**\r\n * Sales Analytics Page Component\r\n * Displays Total Sales (Litres) and Peak Hour cards with time period filters\r\n * Users can filter data by: last 24 hours, last 7 days, last 30 days, last 1 year\r\n * Data is read directly from app data file (analytics.totalLitres & analytics.peakHours)\r\n */\r\n\r\n\"use client\"\r\n\r\nimport { useState } from \"react\"\r\nimport type { Analytics, TimePeriod } from \"@/lib/types\"\r\n\r\ninterface SalesAnalyticsProps {\r\n  analytics: Analytics\r\n}\r\n\r\nexport default function SalesAnalytics({ analytics }: SalesAnalyticsProps) {\r\n  const [timePeriod, setTimePeriod] = useState<TimePeriod>(\"last7Days\")\r\n\r\n  // Time period options\r\n  const timePeriods: { value: TimePeriod; label: string }[] = [\r\n    { value: \"last24Hours\", label: \"Last 24 Hours\" },\r\n    { value: \"last7Days\", label: \"Last 7 Days\" },\r\n    { value: \"last30Days\", label: \"Last 30 Days\" },\r\n    { value: \"last1Year\", label: \"Last 1 Year\" },\r\n  ]\r\n\r\n  // 🔐 Safety guard (prevents crashes if data is missing)\r\n  if (!analytics) {\r\n    return <div className=\"p-6\">Loading analytics...</div>\r\n  }\r\n\r\n  // ✅ Correct paths based on your data file\r\n  const totalLitres = analytics.totalLitres[timePeriod]\r\n  const peakHour = analytics.peakHours[timePeriod]\r\n\r\n  return (\r\n    <div className=\"p-6\">\r\n      {/* Header */}\r\n      <div className=\"mb-6\">\r\n        <h1 className=\"text-3xl font-bold text-gray-800\">Sales Analytics</h1>\r\n        <p className=\"text-gray-600 mt-2\">\r\n          Track sales performance and peak hours\r\n        </p>\r\n      </div>\r\n\r\n      {/* Time Period Filter */}\r\n      <div className=\"mb-6 flex gap-3 flex-wrap\">\r\n        {timePeriods.map((period) => (\r\n          <button\r\n            key={period.value}\r\n            onClick={() => setTimePeriod(period.value)}\r\n            className={`px-4 py-2 rounded-lg font-medium transition-all ${\r\n              timePeriod === period.value\r\n                ? \"bg-blue-600 text-white shadow-md\"\r\n                : \"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50\"\r\n            }`}\r\n          >\r\n            {period.label}\r\n          </button>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Analytics Cards */}\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n        {/* Total Sales Card */}\r\n        <div className=\"bg-white rounded-lg shadow-md p-8\">\r\n          <div className=\"flex items-start justify-between mb-6\">\r\n            <div>\r\n              <p className=\"text-gray-600 font-medium text-sm\">Total Sales</p>\r\n              <h2 className=\"text-gray-800 text-xs mt-1\">\r\n                {timePeriods.find((p) => p.value === timePeriod)?.label}\r\n              </h2>\r\n            </div>\r\n            {/*  <div className=\"text-4xl\">💰</div> */}\r\n          </div>\r\n\r\n          <h3 className=\"text-5xl font-bold text-blue-600\">\r\n            {totalLitres.toLocaleString()} Litres\r\n          </h3>\r\n        </div>\r\n\r\n        {/* Peak Hour Card */}\r\n        <div className=\"bg-white rounded-lg shadow-md p-8\">\r\n          <div className=\"flex items-start justify-between mb-6\">\r\n            <div>\r\n              <p className=\"text-gray-600 font-medium text-sm\">Peak Hour</p>\r\n              <h2 className=\"text-gray-800 text-xs mt-1\">\r\n                {timePeriods.find((p) => p.value === timePeriod)?.label}\r\n              </h2>\r\n            </div>\r\n            {/* <div className=\"text-4xl\">📈</div> */}\r\n          </div>\r\n\r\n          <h3 className=\"text-4xl font-bold text-blue-600\">\r\n            {peakHour.hour}\r\n          </h3>\r\n          <p className=\"text-gray-600 text-sm mt-2\">\r\n            {peakHour.litres.toLocaleString()} litres sold\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;AASA;;;AATA;;;;;CAKC,GAED;;AASe,SAAS,eAAe,EAAE,SAAS,EAAuB;;IACvE,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAAa;IAEzD,sBAAsB;IACtB,MAAM,cAAsD;QAC1D;YAAE,OAAO;YAAe,OAAO;QAAgB;QAC/C;YAAE,OAAO;YAAa,OAAO;QAAc;QAC3C;YAAE,OAAO;YAAc,OAAO;QAAe;QAC7C;YAAE,OAAO;YAAa,OAAO;QAAc;KAC5C;IAED,wDAAwD;IACxD,IAAI,CAAC,WAAW;QACd,qBAAO,6LAAC;YAAI,WAAU;sBAAM;;;;;;IAC9B;IAEA,0CAA0C;IAC1C,MAAM,cAAc,UAAU,WAAW,CAAC,WAAW;IACrD,MAAM,WAAW,UAAU,SAAS,CAAC,WAAW;IAEhD,qBACE,6LAAC;QAAI,WAAU;;0BAEb,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAG,WAAU;kCAAmC;;;;;;kCACjD,6LAAC;wBAAE,WAAU;kCAAqB;;;;;;;;;;;;0BAMpC,6LAAC;gBAAI,WAAU;0BACZ,YAAY,GAAG,CAAC,CAAC,uBAChB,6LAAC;wBAEC,SAAS,IAAM,cAAc,OAAO,KAAK;wBACzC,WAAW,CAAC,gDAAgD,EAC1D,eAAe,OAAO,KAAK,GACvB,qCACA,kEACJ;kCAED,OAAO,KAAK;uBARR,OAAO,KAAK;;;;;;;;;;0BAcvB,6LAAC;gBAAI,WAAU;;kCAEb,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;0CACb,cAAA,6LAAC;;sDACC,6LAAC;4CAAE,WAAU;sDAAoC;;;;;;sDACjD,6LAAC;4CAAG,WAAU;sDACX,YAAY,IAAI,CAAC,CAAC,IAAM,EAAE,KAAK,KAAK,aAAa;;;;;;;;;;;;;;;;;0CAMxD,6LAAC;gCAAG,WAAU;;oCACX,YAAY,cAAc;oCAAG;;;;;;;;;;;;;kCAKlC,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;0CACb,cAAA,6LAAC;;sDACC,6LAAC;4CAAE,WAAU;sDAAoC;;;;;;sDACjD,6LAAC;4CAAG,WAAU;sDACX,YAAY,IAAI,CAAC,CAAC,IAAM,EAAE,KAAK,KAAK,aAAa;;;;;;;;;;;;;;;;;0CAMxD,6LAAC;gCAAG,WAAU;0CACX,SAAS,IAAI;;;;;;0CAEhB,6LAAC;gCAAE,WAAU;;oCACV,SAAS,MAAM,CAAC,cAAc;oCAAG;;;;;;;;;;;;;;;;;;;;;;;;;AAM9C;GAxFwB;KAAA"}},
    {"offset": {"line": 2972, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Desktop/dairy-sight-frontend/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\"\r\nimport { twMerge } from \"tailwind-merge\"\r\n\r\nexport function cn(...inputs: ClassValue[]) {\r\n  return twMerge(clsx(inputs))\r\n}\r\n\r\nexport function formatKenyanDateTime(dateString: string) {\r\n  try {\r\n    const date = new Date(dateString)\r\n    return new Intl.DateTimeFormat(\"en-GB\", {\r\n      day: \"numeric\",\r\n      month: \"short\",\r\n      hour: \"2-digit\",\r\n      minute: \"2-digit\",\r\n      hour12: false,\r\n      timeZone: \"Africa/Nairobi\",\r\n    }).format(date)\r\n  } catch (error) {\r\n    console.error(\"[v0] Error formatting date:\", error)\r\n    return dateString\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,yKAAO,EAAC,IAAA,gJAAI,EAAC;AACtB;AAEO,SAAS,qBAAqB,UAAkB;IACrD,IAAI;QACF,MAAM,OAAO,IAAI,KAAK;QACtB,OAAO,IAAI,KAAK,cAAc,CAAC,SAAS;YACtC,KAAK;YACL,OAAO;YACP,MAAM;YACN,QAAQ;YACR,QAAQ;YACR,UAAU;QACZ,GAAG,MAAM,CAAC;IACZ,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,+BAA+B;QAC7C,OAAO;IACT;AACF"}},
    {"offset": {"line": 3008, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Desktop/dairy-sight-frontend/components/ui/button.tsx"],"sourcesContent":["import * as React from 'react'\r\nimport { Slot } from '@radix-ui/react-slot'\r\nimport { cva, type VariantProps } from 'class-variance-authority'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nconst buttonVariants = cva(\r\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: 'bg-primary text-primary-foreground hover:bg-primary/90',\r\n        destructive:\r\n          'bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60',\r\n        outline:\r\n          'border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50',\r\n        secondary:\r\n          'bg-secondary text-secondary-foreground hover:bg-secondary/80',\r\n        ghost:\r\n          'hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50',\r\n        link: 'text-primary underline-offset-4 hover:underline',\r\n      },\r\n      size: {\r\n        default: 'h-9 px-4 py-2 has-[>svg]:px-3',\r\n        sm: 'h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5',\r\n        lg: 'h-10 rounded-md px-6 has-[>svg]:px-4',\r\n        icon: 'size-9',\r\n        'icon-sm': 'size-8',\r\n        'icon-lg': 'size-10',\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: 'default',\r\n      size: 'default',\r\n    },\r\n  },\r\n)\r\n\r\nfunction Button({\r\n  className,\r\n  variant,\r\n  size,\r\n  asChild = false,\r\n  ...props\r\n}: React.ComponentProps<'button'> &\r\n  VariantProps<typeof buttonVariants> & {\r\n    asChild?: boolean\r\n  }) {\r\n  const Comp = asChild ? Slot : 'button'\r\n\r\n  return (\r\n    <Comp\r\n      data-slot=\"button\"\r\n      className={cn(buttonVariants({ variant, size, className }))}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Button, buttonVariants }\r\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,0KAAG,EACxB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;YACN,WAAW;YACX,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,2KAAI,GAAG;IAE9B,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf;KAnBS"}},
    {"offset": {"line": 3073, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Desktop/dairy-sight-frontend/components/ui/card.tsx"],"sourcesContent":["import * as React from 'react'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nfunction Card({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card\"\r\n      className={cn(\r\n        'bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardHeader({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-header\"\r\n      className={cn(\r\n        '@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardTitle({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-title\"\r\n      className={cn('leading-none font-semibold', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardDescription({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-description\"\r\n      className={cn('text-muted-foreground text-sm', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardAction({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-action\"\r\n      className={cn(\r\n        'col-start-2 row-span-2 row-start-1 self-start justify-self-end',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardContent({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-content\"\r\n      className={cn('px-6', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardFooter({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-footer\"\r\n      className={cn('flex items-center px-6 [.border-t]:pt-6', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport {\r\n  Card,\r\n  CardHeader,\r\n  CardFooter,\r\n  CardTitle,\r\n  CardAction,\r\n  CardDescription,\r\n  CardContent,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAEA;;;AAEA,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAAoC;IAChE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,qFACA;QAED,GAAG,KAAK;;;;;;AAGf;KAXS;AAaT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,4JACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAoC;IACrE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,gBAAgB,EAAE,SAAS,EAAE,GAAG,OAAoC;IAC3E,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,kEACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,QAAQ;QACrB,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAGf;MARS"}},
    {"offset": {"line": 3193, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Desktop/dairy-sight-frontend/components/pages/price.tsx"],"sourcesContent":["/**\r\n * Price Management Component (Backend Connected)\r\n * ----------------------------------------------\r\n * Fetches and updates the milk price per litre from the backend API\r\n * Shows success/error feedback on price update\r\n */\r\n\r\n\"use client\"\r\n\r\nimport { useState, useEffect } from \"react\"\r\nimport { DollarSign, RefreshCw } from \"lucide-react\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Card } from \"@/components/ui/card\"\r\nimport type { Pricing } from \"@/lib/types\"\r\n\r\nconst BACKEND_URL = \"https://40ed9b23-ce6c-4865-9ea7-673fc391e9ac-00-1earrmirya0dv.picard.replit.dev\" // move to env later\r\n\r\nexport default function Price() {\r\n  const [pricing, setPricing] = useState<Pricing>({ pricePerLitre: 0 })\r\n  const [newPrice, setNewPrice] = useState(\"\")\r\n  const [isEditing, setIsEditing] = useState(false)\r\n  const [loading, setLoading] = useState(false)\r\n  const [feedback, setFeedback] = useState<{ type: \"success\" | \"error\"; message: string } | null>(null)\r\n\r\n  // Fetch current price from backend\r\n  const fetchPrice = async () => {\r\n    setLoading(true)\r\n    try {\r\n      const res = await fetch(`${BACKEND_URL}/api/pricing`)\r\n      const data = await res.json()\r\n      setPricing(data)\r\n      setNewPrice(data.pricePerLitre.toString())\r\n      setFeedback(null)\r\n    } catch (error) {\r\n      console.error(\"Failed to fetch price:\", error)\r\n      setFeedback({ type: \"error\", message: \"Failed to fetch current price\" })\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    fetchPrice()\r\n  }, [])\r\n\r\n  // Update price on backend\r\n  const handleSetPrice = async () => {\r\n    const price = parseInt(newPrice)\r\n    if (isNaN(price) || price <= 0) {\r\n      setFeedback({ type: \"error\", message: \"Please enter a valid price greater than 0\" })\r\n      return\r\n    }\r\n\r\n    setLoading(true)\r\n    try {\r\n      const res = await fetch(`${BACKEND_URL}/api/pricing`, {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ pricePerLitre: price }),\r\n      })\r\n\r\n      const data = await res.json()\r\n\r\n      if (res.ok && data.success) {\r\n        setPricing({ pricePerLitre: price })\r\n        setFeedback({ type: \"success\", message: data.message || \"Price updated successfully\" })\r\n        setIsEditing(false)\r\n      } else {\r\n        setFeedback({ type: \"error\", message: data.error || \"Failed to update price\" })\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error updating price:\", error)\r\n      setFeedback({ type: \"error\", message: \"Failed to update price\" })\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"p-4 sm:p-6 lg:p-8 max-w-4xl mx-auto\">\r\n      {/* Header */}\r\n      <div className=\"mb-6 flex items-center justify-between\">\r\n        <div>\r\n          <h1 className=\"text-2xl sm:text-3xl font-bold text-gray-900\">Price Management</h1>\r\n          <p className=\"text-sm sm:text-base text-gray-600 mt-2\">\r\n            Set and manage the milk price per litre\r\n          </p>\r\n        </div>\r\n        {/* Optional Refresh Button */}\r\n        <Button onClick={fetchPrice} variant=\"outline\" className=\"flex items-center gap-2 text-sm\">\r\n          <RefreshCw className=\"w-4 h-4\" />\r\n          Refresh\r\n        </Button>\r\n      </div>\r\n\r\n      {/* Feedback Message */}\r\n      {feedback && (\r\n        <div\r\n          className={`mb-4 p-3 rounded ${\r\n            feedback.type === \"success\" ? \"bg-green-50 text-green-700\" : \"bg-red-50 text-red-700\"\r\n          }`}\r\n        >\r\n          {feedback.message}\r\n        </div>\r\n      )}\r\n\r\n      <Card className=\"p-6 sm:p-8\">\r\n        {/* Current Price */}\r\n        <div className=\"flex items-center gap-3 mb-6\">\r\n          <div className=\"p-3 bg-green-100 rounded-lg\">\r\n            <DollarSign className=\"h-6 w-6 text-green-600\" />\r\n          </div>\r\n          <div>\r\n            <p className=\"text-sm text-gray-600\">Current Price Per Litre</p>\r\n            <p className=\"text-3xl sm:text-4xl font-bold text-gray-900\">\r\n              {loading ? \"Loading...\" : `KES ${pricing.pricePerLitre}`}\r\n            </p>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Edit Section */}\r\n        {!isEditing ? (\r\n          <div>\r\n            <p className=\"text-sm text-gray-600 mb-4\">\r\n              This price is used to calculate all sales analytics and revenue across the system.\r\n            </p>\r\n            <Button onClick={() => setIsEditing(true)} className=\"w-full sm:w-auto\">\r\n              Set New Price\r\n            </Button>\r\n          </div>\r\n        ) : (\r\n          <div className=\"space-y-4\">\r\n            <div>\r\n              <label htmlFor=\"price\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                New Price (KES per Litre)\r\n              </label>\r\n              <input\r\n                id=\"price\"\r\n                type=\"number\"\r\n                value={newPrice}\r\n                onChange={(e) => {\r\n                  setNewPrice(e.target.value)\r\n                  setFeedback(null)\r\n                }}\r\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                placeholder=\"Enter price\"\r\n                min=\"1\"\r\n              />\r\n            </div>\r\n\r\n            {/* Buttons */}\r\n            <div className=\"flex flex-col sm:flex-row gap-3\">\r\n              <Button onClick={handleSetPrice} className=\"flex-1\" disabled={loading}>\r\n                {loading ? \"Saving...\" : \"Confirm Price\"}\r\n              </Button>\r\n              <Button\r\n                onClick={() => {\r\n                  setIsEditing(false)\r\n                  setNewPrice(pricing.pricePerLitre.toString())\r\n                  setFeedback(null)\r\n                }}\r\n                variant=\"outline\"\r\n                className=\"flex-1\"\r\n              >\r\n                Cancel\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </Card>\r\n\r\n      {/* Price Impact Info */}\r\n      <Card className=\"mt-6 p-6 bg-blue-50 border-blue-200\">\r\n        <h3 className=\"font-semibold text-gray-900 mb-2\">Price Impact</h3>\r\n        <p className=\"text-sm text-gray-600\">\r\n          Changing the price per litre will affect all future sales calculations and analytics.\r\n          Historical transactions will retain their original values.\r\n        </p>\r\n      </Card>\r\n    </div>\r\n  )\r\n}\r\n\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3558, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Desktop/dairy-sight-frontend/components/pages/account.tsx"],"sourcesContent":["/**\r\n * Account Management Component\r\n * ----------------------------\r\n * - Fetches vendor details from backend\r\n * - Allows editing vendor name & shopName (ID immutable)\r\n * - Saves updated vendor info to backend\r\n * - Shows success/error feedback\r\n * - Handles account balance and withdrawals\r\n */\r\n\r\n\"use client\"\r\n\r\nimport { useState, useEffect } from \"react\"\r\nimport { Wallet, ArrowDownToLine, Edit, Check, X } from \"lucide-react\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Card } from \"@/components/ui/card\"\r\nimport type { Account, Vendor } from \"@/lib/types\"\r\n\r\nexport default function AccountPage() {\r\n  // State for account\r\n  const [account, setAccount] = useState<Account | null>(null)\r\n  const [loadingAccount, setLoadingAccount] = useState(true)\r\n\r\n  // State for vendor details\r\n  const [vendor, setVendor] = useState<Vendor | null>(null)\r\n  const [loadingVendor, setLoadingVendor] = useState(true)\r\n  const [editMode, setEditMode] = useState(false)\r\n  const [vendorName, setVendorName] = useState(\"\")\r\n  const [shopName, setShopName] = useState(\"\")\r\n  const [vendorFeedback, setVendorFeedback] = useState<{ message: string; success: boolean } | null>(null)\r\n\r\n  // Withdrawal state\r\n  const [isWithdrawing, setIsWithdrawing] = useState(false)\r\n  const [withdrawAmount, setWithdrawAmount] = useState(\"\")\r\n  const [error, setError] = useState(\"\")\r\n\r\n  // Base URL (replace with env later)\r\n  const API_BASE = process.env.NEXT_PUBLIC_API_BASE || \"https://40ed9b23-ce6c-4865-9ea7-673fc391e9ac-00-1earrmirya0dv.picard.replit.dev/api\"\r\n\r\n  // Fetch account data\r\n  const fetchAccount = async () => {\r\n    try {\r\n      setLoadingAccount(true)\r\n      const res = await fetch(`${API_BASE}/account`)\r\n      if (!res.ok) throw new Error(\"Failed to fetch account data\")\r\n      const data: Account = await res.json()\r\n      setAccount(data)\r\n    } catch (err: any) {\r\n      console.error(err)\r\n    } finally {\r\n      setLoadingAccount(false)\r\n    }\r\n  }\r\n\r\n  // Fetch vendor details\r\n  const fetchVendor = async () => {\r\n    try {\r\n      setLoadingVendor(true)\r\n      const res = await fetch(`${API_BASE}/vendor`)\r\n      if (!res.ok) throw new Error(\"Failed to fetch vendor details\")\r\n      const data: Vendor = await res.json()\r\n      setVendor(data)\r\n      setVendorName(data.name)\r\n      setShopName(data.shopName)\r\n    } catch (err: any) {\r\n      console.error(err)\r\n      setVendorFeedback({ message: err.message || \"Error fetching vendor\", success: false })\r\n    } finally {\r\n      setLoadingVendor(false)\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    fetchAccount()\r\n    fetchVendor()\r\n  }, [])\r\n\r\n  // Handle vendor update\r\n  const handleVendorUpdate = async () => {\r\n    if (!vendor) return\r\n    if (!vendorName.trim() || !shopName.trim()) {\r\n      setVendorFeedback({ message: \"All fields are required\", success: false })\r\n      return\r\n    }\r\n\r\n    try {\r\n      const res = await fetch(`${API_BASE}/vendor/${vendor.id}`, {\r\n        method: \"PUT\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ name: vendorName.trim(), shopName: shopName.trim() }),\r\n      })\r\n\r\n      const data = await res.json()\r\n      if (!res.ok) throw new Error(data.error || \"Failed to update vendor\")\r\n\r\n      setVendorFeedback({ message: \"Vendor updated successfully ✅\", success: true })\r\n      setEditMode(false)\r\n      fetchVendor()\r\n    } catch (err: any) {\r\n      console.error(err)\r\n      setVendorFeedback({ message: err.message || \"Update failed ❌\", success: false })\r\n    } finally {\r\n      setTimeout(() => setVendorFeedback(null), 3000)\r\n    }\r\n  }\r\n\r\n  // Handle withdrawal\r\n  const handleWithdraw = async () => {\r\n    const amount = parseInt(withdrawAmount)\r\n    if (isNaN(amount) || amount <= 0) {\r\n      setError(\"Please enter a valid amount greater than 0\")\r\n      return\r\n    }\r\n\r\n    try {\r\n      const res = await fetch(`${API_BASE}/account/withdraw`, {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ amount }),\r\n      })\r\n      const data = await res.json()\r\n      if (!res.ok) throw new Error(data.error || \"Withdrawal failed\")\r\n\r\n      setAccount(data) // Update account state with new balance + withdrawal\r\n      setIsWithdrawing(false)\r\n      setWithdrawAmount(\"\")\r\n      setError(\"\")\r\n    } catch (err: any) {\r\n      console.error(err)\r\n      setError(err.message || \"Error processing withdrawal\")\r\n    }\r\n  }\r\n\r\n  // Handle deposit (optional)\r\n  const handleDeposit = async (amount: number) => {\r\n    try {\r\n      const res = await fetch(`${API_BASE}/account/deposit`, {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ amount }),\r\n      })\r\n      const data = await res.json()\r\n      if (!res.ok) throw new Error(data.error || \"Deposit failed\")\r\n\r\n      setAccount(data)\r\n    } catch (err: any) {\r\n      console.error(err)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"p-4 sm:p-6 lg:p-8 max-w-4xl mx-auto space-y-6\">\r\n      <h1 className=\"text-2xl sm:text-3xl font-bold text-gray-900\">Account</h1>\r\n      <p className=\"text-sm sm:text-base text-gray-600 mt-2\">Manage your account balance, withdrawals, and vendor info</p>\r\n\r\n      {/* Vendor Card */}\r\n      <Card className=\"p-4 sm:p-6 relative\">\r\n        {loadingVendor ? (\r\n          <p className=\"text-gray-500\">Loading vendor details...</p>\r\n        ) : vendor ? (\r\n          <div>\r\n            <div className=\"flex justify-between items-start\">\r\n              <div>\r\n                <p className=\"text-sm text-gray-600\">Vendor Name</p>\r\n                {!editMode ? (\r\n                  <p className=\"font-semibold text-gray-900\">{vendor.name}</p>\r\n                ) : (\r\n                  <input\r\n                    type=\"text\"\r\n                    value={vendorName}\r\n                    onChange={(e) => setVendorName(e.target.value)}\r\n                    className=\"border border-gray-300 rounded-md p-1 mt-1 w-full focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                  />\r\n                )}\r\n\r\n                <p className=\"text-sm text-gray-600 mt-2\">Shop Name</p>\r\n                {!editMode ? (\r\n                  <p className=\"font-semibold text-gray-900\">{vendor.shopName}</p>\r\n                ) : (\r\n                  <input\r\n                    type=\"text\"\r\n                    value={shopName}\r\n                    onChange={(e) => setShopName(e.target.value)}\r\n                    className=\"border border-gray-300 rounded-md p-1 mt-1 w-full focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                  />\r\n                )}\r\n\r\n                <p className=\"text-sm text-gray-600 mt-2\">Vendor ID</p>\r\n                <p className=\"font-semibold text-gray-900\">{vendor.id}</p>\r\n              </div>\r\n\r\n              <div className=\"flex gap-2 mt-1\">\r\n                {!editMode ? (\r\n                  <Edit\r\n                    className=\"w-5 h-5 text-gray-500 cursor-pointer hover:text-blue-600\"\r\n                    onClick={() => setEditMode(true)}\r\n                  />\r\n                ) : (\r\n                  <>\r\n                    <Check\r\n                      className=\"w-5 h-5 text-green-600 cursor-pointer\"\r\n                      onClick={handleVendorUpdate}\r\n                    />\r\n                    <X\r\n                      className=\"w-5 h-5 text-red-600 cursor-pointer\"\r\n                      onClick={() => {\r\n                        setEditMode(false)\r\n                        setVendorName(vendor.name)\r\n                        setShopName(vendor.shopName)\r\n                      }}\r\n                    />\r\n                  </>\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n            {vendorFeedback && (\r\n              <p className={`mt-2 text-sm ${vendorFeedback.success ? \"text-green-600\" : \"text-red-600\"}`}>\r\n                {vendorFeedback.message}\r\n              </p>\r\n            )}\r\n          </div>\r\n        ) : (\r\n          <p className=\"text-red-500\">Vendor details not found</p>\r\n        )}\r\n      </Card>\r\n\r\n      {/* Account Card */}\r\n      <Card className=\"p-6 sm:p-8\">\r\n        <div className=\"flex items-center gap-3 mb-6\">\r\n          <div className=\"p-3 bg-green-100 rounded-lg\">\r\n            <Wallet className=\"h-6 w-6 text-green-600\" />\r\n          </div>\r\n          <div>\r\n            <p className=\"text-sm text-gray-600\">Available Balance</p>\r\n            <p className=\"text-3xl sm:text-4xl font-bold text-gray-900\">\r\n              KES {account?.balance?.toLocaleString() || 0}\r\n            </p>\r\n          </div>\r\n        </div>\r\n\r\n        {!isWithdrawing ? (\r\n          <Button onClick={() => setIsWithdrawing(true)} className=\"w-full sm:w-auto\">\r\n            <ArrowDownToLine className=\"h-4 w-4 mr-2\" /> Withdraw Funds\r\n          </Button>\r\n        ) : (\r\n          <div className=\"space-y-4\">\r\n            <div>\r\n              <label htmlFor=\"amount\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                Withdrawal Amount (KES)\r\n              </label>\r\n              <input\r\n                id=\"amount\"\r\n                type=\"number\"\r\n                value={withdrawAmount}\r\n                onChange={(e) => {\r\n                  setWithdrawAmount(e.target.value)\r\n                  setError(\"\")\r\n                }}\r\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                placeholder=\"Enter amount\"\r\n                min=\"1\"\r\n                max={account?.balance || 0}\r\n              />\r\n              {error && <p className=\"text-red-600 text-sm mt-2\">{error}</p>}\r\n            </div>\r\n\r\n            <div className=\"flex flex-col sm:flex-row gap-3\">\r\n              <Button onClick={handleWithdraw} className=\"flex-1\">Confirm Withdrawal</Button>\r\n              <Button\r\n                onClick={() => {\r\n                  setIsWithdrawing(false)\r\n                  setWithdrawAmount(\"\")\r\n                  setError(\"\")\r\n                }}\r\n                variant=\"outline\"\r\n                className=\"flex-1\"\r\n              >\r\n                Cancel\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </Card>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4085, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Desktop/dairy-sight-frontend/app/page.tsx"],"sourcesContent":["\r\n/**\r\n * Main App Page\r\n * Root route that renders the layout with navigation and main content\r\n * Handles routing between different sections (Dashboard, ATM Devices, etc.)\r\n * Now includes a console.error override to show errors as alerts for debugging\r\n */\r\n\r\n\"use client\"\r\n\r\nimport { useState, useEffect } from \"react\"\r\nimport type { AppData } from \"@/lib/types\"\r\nimport Sidebar from \"@/components/sidebar\"\r\nimport Dashboard from \"@/components/pages/dashboard\"\r\nimport AtmDevices from \"@/components/pages/atm-devices\"\r\nimport TamperDetection from \"@/components/pages/tamper-detection\"\r\nimport SalesAnalytics from \"@/components/pages/sales-analytics\"\r\nimport Price from \"@/components/pages/price\"\r\nimport AccountPage from \"@/components/pages/account\"\r\n\r\nexport default function Home() {\r\n  \r\nuseEffect(() => {\r\n  // Catch runtime errors\r\n  window.addEventListener(\"error\", (e) => {\r\n    alert(`Error: ${e.message}`);\r\n    console.error(e);\r\n  });\r\n\r\n  // Catch unhandled promise rejections\r\n  window.addEventListener(\"unhandledrejection\", (e) => {\r\n    alert(`Promise rejection: ${e.reason}`);\r\n    console.error(e);\r\n  });\r\n}, []);\r\n\r\n  const [currentPage, setCurrentPage] = useState(\"dashboard\")\r\n  const [appData, setAppData] = useState<AppData | null>(null)\r\n  const [loading, setLoading] = useState(true)\r\n  const [sidebarOpen, setSidebarOpen] = useState(false)\r\n\r\n  \r\n\r\n  // Load app data from JSON file on mount\r\n  useEffect(() => {\r\n    const loadData = async () => {\r\n      try {\r\n        const response = await fetch(\"/data/app-data.json\")\r\n        const data = await response.json()\r\n        setAppData(data)\r\n      } catch (error) {\r\n        console.error(\"Failed to load app data:\", error)\r\n      } finally {\r\n        setLoading(false)\r\n      }\r\n    }\r\n\r\n    loadData()\r\n  }, [])\r\n\r\n  const handleUpdatePrice = (newPrice: number) => {\r\n    if (!appData) return\r\n    setAppData({\r\n      ...appData,\r\n      pricing: { pricePerLitre: newPrice },\r\n    })\r\n    console.log(\"[v0] Price updated to:\", newPrice)\r\n  }\r\n\r\n  const handleWithdraw = (amount: number) => {\r\n    if (!appData) return\r\n    const newWithdrawal = {\r\n      id: `WD_${Math.floor(Math.random() * 1000)\r\n        .toString()\r\n        .padStart(3, \"0\")}`,\r\n      amount,\r\n      timestamp: new Date().toISOString(),\r\n    }\r\n    setAppData({\r\n      ...appData,\r\n      account: {\r\n        balance: appData.account.balance - amount,\r\n        withdrawals: [newWithdrawal, ...appData.account.withdrawals],\r\n      },\r\n    })\r\n    console.log(\"[v0] Withdrawal processed:\", amount)\r\n  }\r\n\r\n  // Show loading screen while data is fetching\r\n  if (loading || !appData) {\r\n    return (\r\n      <div className=\"flex h-screen items-center justify-center bg-gray-100\">\r\n        <div className=\"text-center\">\r\n          <div className=\"mb-4 h-12 w-12 animate-spin rounded-full border-4 border-gray-300 border-t-blue-600 mx-auto\"></div>\r\n          <p className=\"text-gray-600\">Loading Dairy Sight...</p>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex h-screen bg-gray-50 overflow-hidden\">\r\n      <Sidebar\r\n        currentPage={currentPage}\r\n        onPageChange={(page) => {\r\n          setCurrentPage(page)\r\n          setSidebarOpen(false) // Close sidebar on mobile after navigation\r\n        }}\r\n        vendor={appData.vendor}\r\n        isOpen={sidebarOpen}\r\n        onToggle={() => setSidebarOpen(!sidebarOpen)}\r\n      />\r\n\r\n      {/* Main Content Area */}\r\n      <main className=\"flex-1 overflow-auto relative\">\r\n        <div className=\"pt-16 lg:pt-0\">\r\n          {currentPage === \"dashboard\" && <Dashboard appData={appData} />}\r\n          {currentPage === \"atm-devices\" && (\r\n            <AtmDevices devices={appData.devices} />\r\n          )}\r\n          {currentPage === \"tamper-detection\" && (\r\n            <TamperDetection devices={appData.devices} />\r\n          )}\r\n          {currentPage === \"sales-analytics\" && (\r\n            <SalesAnalytics analytics={appData.analytics} />\r\n          )}\r\n          {currentPage === \"price\" && (\r\n            <Price pricing={appData.pricing} onUpdatePrice={handleUpdatePrice} />\r\n          )}\r\n          {currentPage === \"account\" && (\r\n            <AccountPage\r\n              account={appData.account}\r\n              vendor={appData.vendor}\r\n              onWithdraw={handleWithdraw}\r\n            />\r\n          )}\r\n        </div>\r\n      </main>\r\n    </div>\r\n  )\r\n}\r\n\r\n"],"names":[],"mappings":"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"}}]
}